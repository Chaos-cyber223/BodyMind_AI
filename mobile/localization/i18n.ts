import AsyncStorage from '@react-native-async-storage/async-storage';
import { Platform, NativeModules } from 'react-native';

export type Language = 'en' | 'zh';

const STORAGE_KEY = 'user_language';

// Get device language
const getDeviceLanguage = (): Language => {
  const deviceLanguage = Platform.OS === 'ios'
    ? NativeModules.SettingsManager?.settings?.AppleLocale || 
      NativeModules.SettingsManager?.settings?.AppleLanguages?.[0]
    : NativeModules.I18nManager?.localeIdentifier;
  
  if (deviceLanguage?.includes('zh') || deviceLanguage?.includes('cn')) {
    return 'zh';
  }
  return 'en';
};

class I18nManager {
  private currentLanguage: Language = 'en';
  private listeners: Array<(language: Language) => void> = [];

  async initialize() {
    try {
      const savedLanguage = await AsyncStorage.getItem(STORAGE_KEY);
      if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'zh')) {
        this.currentLanguage = savedLanguage as Language;
      } else {
        this.currentLanguage = getDeviceLanguage();
        await this.setLanguage(this.currentLanguage);
      }
    } catch (error) {
      console.error('Failed to initialize language:', error);
      this.currentLanguage = getDeviceLanguage();
    }
  }

  getCurrentLanguage(): Language {
    return this.currentLanguage;
  }

  async setLanguage(language: Language) {
    try {
      this.currentLanguage = language;
      await AsyncStorage.setItem(STORAGE_KEY, language);
      this.notifyListeners();
    } catch (error) {
      console.error('Failed to save language:', error);
    }
  }

  subscribe(listener: (language: Language) => void) {
    this.listeners.push(listener);
    return () => {
      this.listeners = this.listeners.filter(l => l !== listener);
    };
  }

  private notifyListeners() {
    this.listeners.forEach(listener => listener(this.currentLanguage));
  }

  t(key: string): string {
    return (translations[this.currentLanguage] as any)[key] || (translations.en as any)[key] || key;
  }
}

export const i18n = new I18nManager();

// Translations
const translations = {
  en: {
    // Welcome Screen
    'welcome.title': 'BodyMind AI',
    'welcome.subtitle': 'Smarter Fat Loss, Backed by Science.',
    'welcome.description': 'Personalized, sustainable results‚Äîpowered by AI.',
    'welcome.getStarted': 'Get Started',
    'welcome.features.science': 'Science-Based',
    'welcome.features.scienceDesc': 'Evidence-backed recommendations',
    'welcome.features.personalized': 'Personalized',
    'welcome.features.personalizedDesc': 'Tailored to your unique needs',
    'welcome.features.ai': 'AI-Powered',
    'welcome.features.aiDesc': 'Advanced machine learning',

    // Profile Setup Screen
    'profile.title': 'Profile Setup',
    'profile.step': 'Step {{current}} of {{total}}',
    'profile.next': 'Next',
    'profile.complete': 'Complete Setup',
    'profile.back': 'Back',

    // Step 1: Basic Info
    'profile.step1.title': 'Basic Information',
    'profile.step1.subtitle': 'Help us understand your current situation',
    'profile.unitSystem': 'Unit System',
    'profile.metric': 'Metric (cm/kg)',
    'profile.imperial': 'Imperial (in/lbs)',
    'profile.age': 'Age',
    'profile.agePlaceholder': 'Enter your age',
    'profile.gender': 'Gender',
    'profile.male': 'Male',
    'profile.female': 'Female',
    'profile.other': 'Other',
    'profile.height': 'Height',
    'profile.heightPlaceholderMetric': 'e.g., 170',
    'profile.heightPlaceholderImperial': 'e.g., 67',
    'profile.currentWeight': 'Current Weight',
    'profile.weightPlaceholderMetric': 'e.g., 70',
    'profile.weightPlaceholderImperial': 'e.g., 154',
    'profile.targetWeight': 'Target Weight',
    'profile.targetWeightPlaceholderMetric': 'e.g., 65',
    'profile.targetWeightPlaceholderImperial': 'e.g., 143',
    'profile.activityLevel': 'Activity Level',
    'profile.sedentary': 'Sedentary',
    'profile.sedentaryDesc': 'Little or no exercise',
    'profile.light': 'Light',
    'profile.lightDesc': 'Light exercise 1-3 days/week',
    'profile.moderate': 'Moderate',
    'profile.moderateDesc': 'Moderate exercise 3-5 days/week',
    'profile.veryActive': 'Very Active',
    'profile.veryActiveDesc': 'Hard exercise 6-7 days/week',

    // Step 2: Goals & Exercise
    'profile.step2.title': 'Goals & Exercise',
    'profile.step2.subtitle': 'Tell us about your fitness goals and preferences',
    'profile.weightLossGoal': 'Weight Loss Goal',
    'profile.slow': 'Slow & Steady',
    'profile.slowDesc': '0.25-0.5 kg/week',
    'profile.moderateGoal': 'Moderate',
    'profile.moderateGoalDesc': '0.5-1 kg/week',
    'profile.fast': 'Faster',
    'profile.fastDesc': '1-1.5 kg/week',
    'profile.exerciseExperience': 'Exercise Experience',
    'profile.beginner': 'Beginner',
    'profile.beginnerDesc': 'New to exercise',
    'profile.intermediate': 'Intermediate',
    'profile.intermediateDesc': 'Some experience',
    'profile.advanced': 'Advanced',
    'profile.advancedDesc': 'Regular exerciser',
    'profile.expert': 'Expert',
    'profile.expertDesc': 'Very experienced',
    'profile.exerciseFrequency': 'Weekly Exercise Frequency',
    'profile.never': 'Never',
    'profile.neverDesc': 'No exercise',
    'profile.occasionally': 'Occasionally',
    'profile.occasionallyDesc': '1-2 times/week',
    'profile.regular': 'Regular',
    'profile.regularDesc': '3-4 times/week',
    'profile.frequent': 'Frequent',
    'profile.frequentDesc': '5-6 times/week',
    'profile.daily': 'Daily',
    'profile.dailyDesc': 'Every day',
    'profile.exerciseDuration': 'Exercise Duration',
    'profile.duration15': '15-30 minutes',
    'profile.duration30': '30-45 minutes',
    'profile.duration45': '45-60 minutes',
    'profile.duration60': '60+ minutes',

    // Step 3: Health Info
    'profile.step3.title': 'Health Information',
    'profile.step3.subtitle': 'Optional - Help us provide better recommendations',
    'profile.healthConditions': 'Health Conditions (Optional)',
    'profile.healthConditionsPlaceholder': 'Any health conditions we should know about?',
    'profile.allergies': 'Food Allergies (Optional)',
    'profile.allergiesPlaceholder': 'Any food allergies or intolerances?',
    'profile.medications': 'Medications (Optional)',
    'profile.medicationsPlaceholder': 'Any medications you\'re currently taking?',
    'profile.completeTitle': 'Profile Complete!',
    'profile.completeMessage': 'Your personalized plan is being generated...',
    'profile.continue': 'Continue',

    // Chat Screen
    'chat.title': 'AI Fat Loss Expert',
    'chat.subtitle': 'Powered by LangChain RAG',
    'chat.analyzing': 'Analyzing...',
    'chat.placeholder': 'Ask about diet, exercise, or fat loss...',
    'chat.voiceInput': 'Voice Input',
    'chat.voiceInputSoon': 'Voice input coming soon!',
    'chat.typingIndicator': 'AI is analyzing scientific research...',
    'chat.connectionError': 'Connection Error',
    'chat.connectionErrorMessage': 'Unable to send message. Please check your internet connection and try again.',
    'chat.retry': 'Retry',
    'chat.ok': 'OK',
    'chat.sources': 'Sources:',
    'chat.quickActions.protein': 'How much protein should I eat?',
    'chat.quickActions.exercise': 'Best exercises for fat loss',
    'chat.quickActions.plateau': 'Why am I not losing weight?',
    'chat.quickActions.hiit': 'HIIT vs cardio',

    // Meal Plan Screen
    'mealPlan.title': 'Your Personal Plan',
    'mealPlan.subtitle': 'Science-backed strategy',
    'mealPlan.goalProgress': 'Goal Progress',
    'mealPlan.week': 'Week {{current}} of {{total}}',
    'mealPlan.current': 'Current: {{weight}}kg',
    'mealPlan.target': 'Target: {{weight}}kg',
    'mealPlan.kgLost': 'kg lost',
    'mealPlan.aiLogging': 'AI Smart Logging',
    'mealPlan.aiPowered': 'üß† AI Powered',
    'mealPlan.recentEntries': 'Recent entries:',
    'mealPlan.aiPlaceholder': 'Tell AI what you ate or exercised...',
    'mealPlan.aiTipsTitle': 'üí° AI Logging Tips',
    'mealPlan.aiTip1': '‚Ä¢ "Had oatmeal for breakfast"',
    'mealPlan.aiTip2': '‚Ä¢ "Ran for 30 minutes"',
    'mealPlan.aiTip3': '‚Ä¢ "Ate a chicken salad and went to gym"',
    'mealPlan.nutrition': 'Today\'s Nutrition',
    'mealPlan.chatToUpdate': 'üí¨ Chat to Update',
    'mealPlan.calories': 'Calories',
    'mealPlan.caloriesFormat': '{{current}} / {{target}} kcal',
    'mealPlan.protein': 'Protein',
    'mealPlan.carbs': 'Carbs',
    'mealPlan.fats': 'Fats',
    'mealPlan.workout': 'Today\'s Workout',
    'mealPlan.aiGenerated': 'üß† AI Generated',
    'mealPlan.aiSuggestion': 'AI Suggestion: Complete the Plank exercise for a balanced workout!',
    'mealPlan.latestResearch': 'Latest Research',
    'mealPlan.researchText': 'Combined strength + cardio training increases fat loss by 28% compared to cardio alone',
    'mealPlan.foodLoggedSuccess': 'Food Logged Successfully!',
    'mealPlan.foodLoggedMessage': 'Added {{calories}} calories from: {{description}}',
    'mealPlan.exerciseLoggedSuccess': 'Exercise Logged Successfully!',
    'mealPlan.exerciseLoggedMessage': 'Burned {{calories}} calories from {{duration}} minutes of exercise',
    'mealPlan.processingError': 'Processing Error',
    'mealPlan.processingErrorMessage': 'Unable to process your input. Please try again or be more specific.',

    // Common
    'common.loading': 'Loading...',
    'common.error': 'Error',
    'common.success': 'Success',
    'common.cancel': 'Cancel',
    'common.save': 'Save',
    'common.delete': 'Delete',
    'common.edit': 'Edit',
    'common.settings': 'Settings',
  },
  zh: {
    // Welcome Screen
    'welcome.title': 'BodyMind AI',
    'welcome.subtitle': 'Êô∫ËÉΩÂáèËÑÇÔºåÁßëÂ≠¶‰∏∫Êú¨„ÄÇ',
    'welcome.description': 'AIËµãËÉΩÔºå‰∏ìÂ±û‰Ω†ÁöÑÂÅ•Â∫∑ÊñπÊ°à„ÄÇ',
    'welcome.getStarted': 'ÂºÄÂßã‰ΩøÁî®',
    'welcome.features.science': 'ÁßëÂ≠¶‰æùÊçÆ',
    'welcome.features.scienceDesc': 'Âü∫‰∫éËØÅÊçÆÁöÑÂª∫ËÆÆ',
    'welcome.features.personalized': '‰∏™ÊÄßÂåñ',
    'welcome.features.personalizedDesc': 'ÈáèË∫´ÂÆöÂà∂ÊÇ®ÁöÑÁã¨ÁâπÈúÄÊ±Ç',
    'welcome.features.ai': 'AIÈ©±Âä®',
    'welcome.features.aiDesc': 'ÂÖàËøõÁöÑÊú∫Âô®Â≠¶‰π†',

    // Profile Setup Screen
    'profile.title': '‰∏™‰∫∫ËµÑÊñôËÆæÁΩÆ',
    'profile.step': 'Á¨¨{{current}}Ê≠•ÔºåÂÖ±{{total}}Ê≠•',
    'profile.next': '‰∏ã‰∏ÄÊ≠•',
    'profile.complete': 'ÂÆåÊàêËÆæÁΩÆ',
    'profile.back': 'ËøîÂõû',

    // Step 1: Basic Info
    'profile.step1.title': 'Âü∫Êú¨‰ø°ÊÅØ',
    'profile.step1.subtitle': 'Â∏ÆÂä©Êàë‰ª¨‰∫ÜËß£ÊÇ®ÁöÑÂΩìÂâçÊÉÖÂÜµ',
    'profile.unitSystem': 'Âçï‰ΩçÂà∂',
    'profile.metric': 'ÂÖ¨Âà∂ (ÂéòÁ±≥/ÂÖ¨Êñ§)',
    'profile.imperial': 'Ëã±Âà∂ (Ëã±ÂØ∏/Á£Ö)',
    'profile.age': 'Âπ¥ÈæÑ',
    'profile.agePlaceholder': 'ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂπ¥ÈæÑ',
    'profile.gender': 'ÊÄßÂà´',
    'profile.male': 'Áî∑ÊÄß',
    'profile.female': 'Â•≥ÊÄß',
    'profile.other': 'ÂÖ∂‰ªñ',
    'profile.height': 'Ë∫´È´ò',
    'profile.heightPlaceholderMetric': '‰æãÂ¶ÇÔºö170',
    'profile.heightPlaceholderImperial': '‰æãÂ¶ÇÔºö67',
    'profile.currentWeight': 'ÂΩìÂâç‰ΩìÈáç',
    'profile.weightPlaceholderMetric': '‰æãÂ¶ÇÔºö70',
    'profile.weightPlaceholderImperial': '‰æãÂ¶ÇÔºö154',
    'profile.targetWeight': 'ÁõÆÊ†á‰ΩìÈáç',
    'profile.targetWeightPlaceholderMetric': '‰æãÂ¶ÇÔºö65',
    'profile.targetWeightPlaceholderImperial': '‰æãÂ¶ÇÔºö143',
    'profile.activityLevel': 'Ê¥ªÂä®Ê∞¥Âπ≥',
    'profile.sedentary': '‰πÖÂùê‰∏çÂä®',
    'profile.sedentaryDesc': 'ÂæàÂ∞ëÊàñ‰∏çËøêÂä®',
    'profile.light': 'ËΩªÂ∫¶Ê¥ªÂä®',
    'profile.lightDesc': 'ÊØèÂë®ËΩªÂ∫¶ËøêÂä®1-3Â§©',
    'profile.moderate': '‰∏≠Â∫¶Ê¥ªÂä®',
    'profile.moderateDesc': 'ÊØèÂë®‰∏≠Â∫¶ËøêÂä®3-5Â§©',
    'profile.veryActive': 'È´òÂ∫¶Ê¥ªË∑É',
    'profile.veryActiveDesc': 'ÊØèÂë®ÂâßÁÉàËøêÂä®6-7Â§©',

    // Step 2: Goals & Exercise
    'profile.step2.title': 'ÁõÆÊ†á‰∏éËøêÂä®',
    'profile.step2.subtitle': 'ÂëäËØâÊàë‰ª¨ÊÇ®ÁöÑÂÅ•Ë∫´ÁõÆÊ†áÂíåÂÅèÂ•Ω',
    'profile.weightLossGoal': 'ÂáèÈáçÁõÆÊ†á',
    'profile.slow': 'ÁºìÊÖ¢Á®≥ÂÆö',
    'profile.slowDesc': 'ÊØèÂë®0.25-0.5ÂÖ¨Êñ§',
    'profile.moderateGoal': '‰∏≠Á≠âÈÄüÂ∫¶',
    'profile.moderateGoalDesc': 'ÊØèÂë®0.5-1ÂÖ¨Êñ§',
    'profile.fast': 'ËæÉÂø´',
    'profile.fastDesc': 'ÊØèÂë®1-1.5ÂÖ¨Êñ§',
    'profile.exerciseExperience': 'ËøêÂä®ÁªèÈ™å',
    'profile.beginner': 'ÂàùÂ≠¶ËÄÖ',
    'profile.beginnerDesc': 'ËøêÂä®Êñ∞Êâã',
    'profile.intermediate': '‰∏≠Á∫ß',
    'profile.intermediateDesc': 'Êúâ‰∏Ä‰∫õÁªèÈ™å',
    'profile.advanced': 'È´òÁ∫ß',
    'profile.advancedDesc': 'ÁªèÂ∏∏ËøêÂä®',
    'profile.expert': '‰∏ìÂÆ∂',
    'profile.expertDesc': 'ÈùûÂ∏∏ÊúâÁªèÈ™å',
    'profile.exerciseFrequency': 'ÊØèÂë®ËøêÂä®È¢ëÁéá',
    'profile.never': '‰ªé‰∏ç',
    'profile.neverDesc': '‰∏çËøêÂä®',
    'profile.occasionally': 'ÂÅ∂Â∞î',
    'profile.occasionallyDesc': 'ÊØèÂë®1-2Ê¨°',
    'profile.regular': 'ÁªèÂ∏∏',
    'profile.regularDesc': 'ÊØèÂë®3-4Ê¨°',
    'profile.frequent': 'È¢ëÁπÅ',
    'profile.frequentDesc': 'ÊØèÂë®5-6Ê¨°',
    'profile.daily': 'ÊØèÂ§©',
    'profile.dailyDesc': 'ÊØèÂ§©ÈÉΩËøêÂä®',
    'profile.exerciseDuration': 'ËøêÂä®Êó∂Èïø',
    'profile.duration15': '15-30ÂàÜÈíü',
    'profile.duration30': '30-45ÂàÜÈíü',
    'profile.duration45': '45-60ÂàÜÈíü',
    'profile.duration60': '60ÂàÜÈíü‰ª•‰∏ä',

    // Step 3: Health Info
    'profile.step3.title': 'ÂÅ•Â∫∑‰ø°ÊÅØ',
    'profile.step3.subtitle': 'ÂèØÈÄâ - Â∏ÆÂä©Êàë‰ª¨Êèê‰æõÊõ¥Â•ΩÁöÑÂª∫ËÆÆ',
    'profile.healthConditions': 'ÂÅ•Â∫∑Áä∂ÂÜµÔºàÂèØÈÄâÔºâ',
    'profile.healthConditionsPlaceholder': 'Êúâ‰ªÄ‰πàÂÅ•Â∫∑Áä∂ÂÜµÈúÄË¶ÅÊàë‰ª¨‰∫ÜËß£ÁöÑÂêóÔºü',
    'profile.allergies': 'È£üÁâ©ËøáÊïèÔºàÂèØÈÄâÔºâ',
    'profile.allergiesPlaceholder': 'Êúâ‰ªÄ‰πàÈ£üÁâ©ËøáÊïèÊàñ‰∏çËÄêÂèóÂêóÔºü',
    'profile.medications': 'ËçØÁâ©ÔºàÂèØÈÄâÔºâ',
    'profile.medicationsPlaceholder': 'ÁõÆÂâçÊ≠£Âú®ÊúçÁî®‰ªÄ‰πàËçØÁâ©ÂêóÔºü',
    'profile.completeTitle': 'ËµÑÊñôÂÆåÊàêÔºÅ',
    'profile.completeMessage': 'Ê≠£Âú®ÁîüÊàêÊÇ®ÁöÑ‰∏™ÊÄßÂåñËÆ°Âàí...',
    'profile.continue': 'ÁªßÁª≠',

    // Chat Screen
    'chat.title': 'AIÂáèËÑÇ‰∏ìÂÆ∂',
    'chat.subtitle': 'Áî±LangChain RAGÈ©±Âä®',
    'chat.analyzing': 'ÂàÜÊûê‰∏≠...',
    'chat.placeholder': 'ËØ¢ÈóÆÈ•ÆÈ£ü„ÄÅËøêÂä®ÊàñÂáèËÑÇÁõ∏ÂÖ≥ÈóÆÈ¢ò...',
    'chat.voiceInput': 'ËØ≠Èü≥ËæìÂÖ•',
    'chat.voiceInputSoon': 'ËØ≠Èü≥ËæìÂÖ•Âç≥Â∞ÜÊé®Âá∫ÔºÅ',
    'chat.typingIndicator': 'AIÊ≠£Âú®ÂàÜÊûêÁßëÂ≠¶Á†îÁ©∂...',
    'chat.connectionError': 'ËøûÊé•ÈîôËØØ',
    'chat.connectionErrorMessage': 'Êó†Ê≥ïÂèëÈÄÅÊ∂àÊÅØ„ÄÇËØ∑Ê£ÄÊü•ÊÇ®ÁöÑÁΩëÁªúËøûÊé•Âπ∂ÈáçËØï„ÄÇ',
    'chat.retry': 'ÈáçËØï',
    'chat.ok': 'Á°ÆÂÆö',
    'chat.sources': 'Êù•Ê∫êÔºö',
    'chat.quickActions.protein': 'ÊàëÂ∫îËØ•ÂêÉÂ§öÂ∞ëËõãÁôΩË¥®Ôºü',
    'chat.quickActions.exercise': 'ÂáèËÑÇÊúÄ‰Ω≥ËøêÂä®',
    'chat.quickActions.plateau': '‰∏∫‰ªÄ‰πàÊàë‰∏çÂáèÈáç‰∫ÜÔºü',
    'chat.quickActions.hiit': 'HIIT‰∏éÊúâÊ∞ßËøêÂä®',

    // Meal Plan Screen
    'mealPlan.title': 'ÊÇ®ÁöÑ‰∏™‰∫∫ËÆ°Âàí',
    'mealPlan.subtitle': 'ÁßëÂ≠¶ÊîØÊåÅÁöÑÁ≠ñÁï•',
    'mealPlan.goalProgress': 'ÁõÆÊ†áËøõÂ∫¶',
    'mealPlan.week': 'Á¨¨{{current}}Âë®ÔºåÂÖ±{{total}}Âë®',
    'mealPlan.current': 'ÂΩìÂâçÔºö{{weight}}ÂÖ¨Êñ§',
    'mealPlan.target': 'ÁõÆÊ†áÔºö{{weight}}ÂÖ¨Êñ§',
    'mealPlan.kgLost': 'ÂÖ¨Êñ§Â∑≤Âáè',
    'mealPlan.aiLogging': 'AIÊô∫ËÉΩËÆ∞ÂΩï',
    'mealPlan.aiPowered': 'üß† AIÈ©±Âä®',
    'mealPlan.recentEntries': 'ÊúÄËøëËÆ∞ÂΩïÔºö',
    'mealPlan.aiPlaceholder': 'ÂëäËØâAIÊÇ®ÂêÉ‰∫Ü‰ªÄ‰πàÊàñÂÅö‰∫Ü‰ªÄ‰πàËøêÂä®...',
    'mealPlan.aiTipsTitle': 'üí° AIËÆ∞ÂΩïÂ∞èË¥¥Â£´',
    'mealPlan.aiTip1': '‚Ä¢ "Êó©È§êÂêÉ‰∫ÜÁáïÈ∫¶"',
    'mealPlan.aiTip2': '‚Ä¢ "Ë∑ëÊ≠•30ÂàÜÈíü"',
    'mealPlan.aiTip3': '‚Ä¢ "ÂêÉ‰∫ÜÈ∏°ËÇâÊ≤ôÊãâÔºåÂéª‰∫ÜÂÅ•Ë∫´Êàø"',
    'mealPlan.nutrition': '‰ªäÊó•Ëê•ÂÖª',
    'mealPlan.chatToUpdate': 'üí¨ ËÅäÂ§©Êõ¥Êñ∞',
    'mealPlan.calories': 'Âç°Ë∑ØÈáå',
    'mealPlan.caloriesFormat': '{{current}} / {{target}} ÂçÉÂç°',
    'mealPlan.protein': 'ËõãÁôΩË¥®',
    'mealPlan.carbs': 'Á¢≥Ê∞¥ÂåñÂêàÁâ©',
    'mealPlan.fats': 'ËÑÇËÇ™',
    'mealPlan.workout': '‰ªäÊó•ÈîªÁÇº',
    'mealPlan.aiGenerated': 'üß† AIÁîüÊàê',
    'mealPlan.aiSuggestion': 'AIÂª∫ËÆÆÔºöÂÆåÊàêÂπ≥ÊùøÊîØÊíëÁªÉ‰π†‰ª•Ëé∑ÂæóÂπ≥Ë°°ÁöÑÈîªÁÇºÔºÅ',
    'mealPlan.latestResearch': 'ÊúÄÊñ∞Á†îÁ©∂',
    'mealPlan.researchText': 'ÂäõÈáèËÆ≠ÁªÉÂä†ÊúâÊ∞ßËøêÂä®Áõ∏ÊØîÂçïÁã¨ÊúâÊ∞ßËøêÂä®ÂèØÂ¢ûÂä†28%ÁöÑÂáèËÑÇÊïàÊûú',
    'mealPlan.foodLoggedSuccess': 'È£üÁâ©ËÆ∞ÂΩïÊàêÂäüÔºÅ',
    'mealPlan.foodLoggedMessage': 'Â∑≤Ê∑ªÂä†{{calories}}Âç°Ë∑ØÈáåÔºö{{description}}',
    'mealPlan.exerciseLoggedSuccess': 'ËøêÂä®ËÆ∞ÂΩïÊàêÂäüÔºÅ',
    'mealPlan.exerciseLoggedMessage': '{{duration}}ÂàÜÈíüËøêÂä®Ê∂àËÄó‰∫Ü{{calories}}Âç°Ë∑ØÈáå',
    'mealPlan.processingError': 'Â§ÑÁêÜÈîôËØØ',
    'mealPlan.processingErrorMessage': 'Êó†Ê≥ïÂ§ÑÁêÜÊÇ®ÁöÑËæìÂÖ•„ÄÇËØ∑ÈáçËØïÊàñÊèê‰æõÊõ¥ÂÖ∑‰ΩìÁöÑ‰ø°ÊÅØ„ÄÇ',

    // Common
    'common.loading': 'Âä†ËΩΩ‰∏≠...',
    'common.error': 'ÈîôËØØ',
    'common.success': 'ÊàêÂäü',
    'common.cancel': 'ÂèñÊ∂à',
    'common.save': '‰øùÂ≠ò',
    'common.delete': 'Âà†Èô§',
    'common.edit': 'ÁºñËæë',
    'common.settings': 'ËÆæÁΩÆ',
  }
};

// Hook for React components
import { useState, useEffect } from 'react';

export const useTranslation = () => {
  const [language, setLanguage] = useState<Language>(i18n.getCurrentLanguage());

  useEffect(() => {
    const unsubscribe = i18n.subscribe(setLanguage);
    return unsubscribe;
  }, []);

  return {
    t: (key: string, params?: Record<string, string | number>) => {
      let text = i18n.t(key);
      if (params) {
        Object.entries(params).forEach(([param, value]) => {
          text = text.replace(new RegExp(`{{${param}}}`, 'g'), String(value));
        });
      }
      return text;
    },
    language,
    setLanguage: i18n.setLanguage.bind(i18n),
    isZh: language === 'zh',
    isEn: language === 'en',
  };
};

export default i18n;